{
    "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "location": {
            "type": "string",
            "defaultValue": ""
        },
        "resourcegroup": {
            "type": "string",
            "defaultValue": ""
        },
        "subscriptionId": {
            "type": "string",
            "defaultValue": ""
        },
        "workspace": {
            "type": "string",
            "defaultValue": ""
        },
        "workspaceapiversion": {
            "type": "string",
            "defaultValue": ""
        }
    },
    "resources": [
        {
            "apiVersion": "[parameters('workspaceapiversion')]",
            "name": "[parameters('workspace')]",
            "type": "Microsoft.OperationalInsights/workspaces",
            "location": "[parameters('location')]",
            "id": "[Concat('/subscriptions/', parameters('subscriptionId'), '/resourceGroups/', parameters('resourcegroup'), '/providers/Microsoft.OperationalInsights/workspaces/', parameters('workspace'))]",
            "resources": [
                {
                    "apiVersion": "2015-11-01-preview",
                    "name": "Amazon VPC Environment",
                    "type": "views",
                    "location": "[parameters('location')]",
                    "id": "[Concat('/subscriptions/', parameters('subscriptionId'), '/resourceGroups/', parameters('resourcegroup'), '/providers/Microsoft.OperationalInsights/workspaces/', parameters('workspace'),'/views/Amazon VPC Environment')]",
                    "dependson": [
                        "[Concat('/subscriptions/', parameters('subscriptionId'), '/resourceGroups/', parameters('resourcegroup'), '/providers/Microsoft.OperationalInsights/workspaces/', parameters('workspace'))]"
                    ],
                    "properties": {
                        "Id": "Amazon VPC Environment",
                        "Name": "Amazon VPC Environment",
                        "Author": "service.azure@bluemedora.com",
                        "Source": "Local",
                        "Version": 2,
                        "Dashboard": [
                            {
                                "Id": "InformationBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "Title": "VPC Overview",
                                        "NewGroup": false,
                                        "Color": "#dd5900"
                                    },
                                    "Header": {
                                        "Image": "data:image/png;base64,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",
                                        "Label": "Amazon VPC",
                                        "Link": {
                                            "Label": "More info",
                                            "Url": "https://docs.bindplane.bluemedora.com/docs/vpc"
                                        }
                                    },
                                    "List": [
                                        {
                                            "Title": "Overview",
                                            "Content": "Amazon VPC is a service for logically isolating sections of the AWS cloud and controlling its network accessibility."
                                        },
                                        {
                                            "Title": "Key Performance Indicators",
                                            "Content": "In Amazon VPC, it's important to monitor default configuration values.\n\nFor instance, subnets can be configured to launch either public or private IP addresses--which may have important security implications.\n\nIt's also important to monitor the traffic and number of connections to a VPC, as this may have a direct coorelation to cost, based on the pricing model chosen."
                                        }
                                    ]
                                }
                            },
                            {
                                "Id": "TwoNumberTileListBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "VPC Availability",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Tile": {
                                        "Legend": "Available",
                                        "Query": "amazon_vpc_vpc_CL | where amazon_vpc_vpc_name_s = ${VPC} | where TimeGenerated > ago(10m)  | join kind=inner( amazon_vpc_vpc_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_vpc_vpc_name_s ) on TimeGenerated, amazon_vpc_vpc_name_s | where vpc_state_s == 'available' | count"
                                    },
                                    "SecondTile": {
                                        "Legend": "Unavailable",
                                        "Query": "amazon_vpc_vpc_CL | where amazon_vpc_vpc_name_s = ${VPC} | where TimeGenerated > ago(10m) |  join kind=inner( amazon_vpc_vpc_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_vpc_vpc_name_s ) on TimeGenerated, amazon_vpc_vpc_name_s | where vpc_state_s != 'available' | count"
                                    },
                                    "List": {
                                        "Query": "amazon_vpc_vpc_CL | where amazon_vpc_vpc_name_s = ${VPC} | extend state = iif(vpc_state_s=='available', 100.0, 0.0) | summarize avg(state) by amazon_vpc_vpc_name_s",
                                        "HideGraph": false,
                                        "enableSparklines": true,
                                        "operation": "Last Sample",
                                        "ColumnsTitle": {
                                            "Name": "VPC",
                                            "Value": "Availability"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "search {selected item} | sort by TimeGenerated desc",
                                        "NavigationSelect": {
                                            "NavigationQuery": "search {selected item} | sort by TimeGenerated desc"
                                        }
                                    },
                                    "Blade": {
                                        "NavigationSelect": {}
                                    }
                                }
                            },
                            {
                                "Id": "TwoNumberTileListBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "VPC Subnet",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Tile": {
                                        "Legend": "Public IP on Launch",
                                        "Query": "amazon_vpc_subnet_CL | where amazon_vpc_vpc_name_s = ${VPC} | join kind= inner( amazon_vpc_subnet_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_vpc_subnet_name_s ) on TimeGenerated, amazon_vpc_subnet_name_s | where subnet_map_public_ip_d == 1 | count"
                                    },
                                    "SecondTile": {
                                        "Legend": "Private IP on Launch",
                                        "Query": "amazon_vpc_subnet_CL | where amazon_vpc_vpc_name_s = ${VPC} | join kind= inner( amazon_vpc_subnet_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_vpc_subnet_name_s ) on TimeGenerated, amazon_vpc_subnet_name_s | where subnet_map_public_ip_d != 1 | count"
                                    },
                                    "List": {
                                        "Query": "amazon_vpc_subnet_CL | where amazon_vpc_vpc_name_s = ${VPC} | summarize avg(iif(subnet_state_s=='available',100,0)) by amazon_vpc_subnet_name_s | order by avg_ asc",
                                        "HideGraph": false,
                                        "enableSparklines": true,
                                        "operation": "Last Sample",
                                        "ColumnsTitle": {
                                            "Name": "Subnet",
                                            "Value": "Availability"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "search {selected item} | sort by TimeGenerated desc",
                                        "NavigationSelect": {
                                            "NavigationQuery": "search {selected item} | sort by TimeGenerated desc"
                                        }
                                    },
                                    "Blade": {
                                        "NavigationSelect": {}
                                    }
                                }
                            },
                            {
                                "Id": "LineChartCalloutBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "VPC Gateway Connections",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "Connections",
                                        "Subtitle": ""
                                    },
                                    "LineChart": {
                                        "Query": "amazon_vpc_nat_gateway_CL | where amazon_vpc_vpc_name_s = ${VPC} | summarize avg(active_connection_count_d) by nat_gateway_vpc_id_s",
                                        "Callout": {
                                            "Title": "Total",
                                            "Series": "",
                                            "Operation": "Last Sample"
                                        },
                                        "yAxis": {
                                            "isLogarithmic": false,
                                            "units": {
                                                "baseUnitType": "",
                                                "baseUnit": "",
                                                "displayUnit": ""
                                            },
                                            "customLabel": "Connections"
                                        },
                                        "NavigationSelect": {}
                                    },
                                    "List": {
                                        "Query": "amazon_vpc_nat_gateway_CL | where amazon_vpc_vpc_name_s = ${VPC} | summarize avg(active_connection_count_d) by nat_gateway_vpc_id_s | order by avg_active_connection_count_d desc",
                                        "HideGraph": false,
                                        "enableSparklines": false,
                                        "operation": "Last Sample",
                                        "ColumnsTitle": {
                                            "Name": "Gateway",
                                            "Value": "Active Connections"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "search {selected item} | sort by TimeGenerated desc",
                                        "NavigationSelect": {
                                            "NavigationQuery": "search {selected item} | sort by TimeGenerated desc"
                                        }
                                    }
                                }
                            },
                            {
                                "Id": "LineChartCalloutStackedBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "VPC Tunnel",
                                        "newGroup": false
                                    },
                                    "charts": [
                                        {
                                            "Header": {
                                                "Title": "Tunnel Availability",
                                                "Subtitle": ""
                                            },
                                            "LineChart": {
                                                "Query": "amazon_vpc_tunnel_CL | summarize avg(tunnel_state_d * 100) by amazon_vpc_tunnel_name_s",
                                                "yAxis": {
                                                    "isLogarithmic": false,
                                                    "units": {
                                                        "baseUnitType": "Percentage",
                                                        "baseUnit": "ZeroToOne",
                                                        "displayUnit": "ZeroToOne"
                                                    },
                                                    "customLabel": "Available"
                                                },
                                                "NavigationSelect": {}
                                            }
                                        },
                                        {
                                            "Header": {
                                                "Title": "Tunnel Data In",
                                                "Subtitle": ""
                                            },
                                            "LineChart": {
                                                "Query": "amazon_vpc_tunnel_CL | summarize avg(tunnel_data_in_d) by amazon_vpc_tunnel_name_s",
                                                "yAxis": {
                                                    "isLogarithmic": false,
                                                    "units": {
                                                        "baseUnitType": "Bits",
                                                        "baseUnit": "Bytes",
                                                        "displayUnit": "Bytes"
                                                    },
                                                    "customLabel": "Data"
                                                },
                                                "NavigationSelect": {}
                                            }
                                        },
                                        {
                                            "Header": {
                                                "Title": "Tunnel Data Out",
                                                "Subtitle": ""
                                            },
                                            "LineChart": {
                                                "Query": "amazon_vpc_tunnel_CL | summarize avg(tunnel_data_out_d) by amazon_vpc_tunnel_name_s",
                                                "yAxis": {
                                                    "isLogarithmic": false,
                                                    "units": {
                                                        "baseUnitType": "Bits",
                                                        "baseUnit": "Bytes",
                                                        "displayUnit": "Bytes"
                                                    },
                                                    "customLabel": "Data"
                                                },
                                                "NavigationSelect": {}
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "Id": "NotableQueriesBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "Additional Info",
                                        "newGroup": false,
                                        "preselectedFilters": "Type, Computer",
                                        "renderMode": "grid"
                                    },
                                    "queries": [
                                        {
                                            "query": "amazon_vpc_subnet_CL | join kind= inner( amazon_vpc_subnet_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_vpc_subnet_name_s ) on TimeGenerated, amazon_vpc_subnet_name_s | project amazon_vpc_subnet_name_s, subnet_cidr_block_s, subnet_default_for_az_d, subnet_vpc_id_s, subnet_availability_zone_s, subnet_map_public_ip_d",
                                            "displayName": "Subnet Configuration"
                                        },
                                        {
                                            "query": "amazon_vpc_subnet_CL | join kind= inner( amazon_vpc_subnet_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_vpc_subnet_name_s ) on TimeGenerated, amazon_vpc_subnet_name_s | project amazon_vpc_subnet_name_s, subnet_available_ip_count_d ",
                                            "displayName": "Subnet Available IPs"
                                        },
                                        {
                                            "query": "amazon_vpc_nat_gateway_CL | join kind= inner ( amazon_vpc_nat_gateway_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_vpc_nat_gateway_name_s ) on TimeGenerated, amazon_vpc_nat_gateway_name_s | project amazon_vpc_nat_gateway_name_s, nat_gateway_creation_time_s, nat_gateway_subnet_id_s, nat_gateway_vpc_id_s, error_port_allocation_d ",
                                            "displayName": "Gateway Configuration"
                                        },
                                        {
                                            "query": "amazon_vpc_nat_gateway_CL | summarize sum(bytes_in_from_destination_d), sum(bytes_out_to_destination_d), sum(bytes_in_from_source_d), sum(bytes_out_to_source_d) by amazon_vpc_nat_gateway_name_s",
                                            "displayName": "Gateway Traffic"
                                        },
                                        {
                                            "query": "amazon_vpc_vpc_CL | join kind= inner ( amazon_vpc_vpc_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_vpc_vpc_name_s ) on TimeGenerated, amazon_vpc_vpc_name_s | project amazon_vpc_vpc_name_s, vpc_cidr_block_s, vpc_dhcp_options_s, vpc_instance_tenancy_s, vpc_is_default_d",
                                            "displayName": "VPC Configuration"
                                        },
                                        {
                                            "query": "amazon_vpc_vpn_CL | summarize sum(tunnel_data_in_d), sum(tunnel_state_d) by amazon_vpc_vpn_name_s",
                                            "displayName": "VPN Traffic"
                                        }
                                    ]
                                }
                            }
                        ],
                        "Filters": [
                            {
                                "FieldName": "amazon_vpc_vpc_name_s",
                                "QueryForValues": "amazon_vpc_vpc_CL | distinct amazon_vpc_vpc_name_s",
                                "Title": "VPC"
                            }
                        ],
                        "OverviewTile": {
                            "Id": "LineChartCalloutBuilderTile",
                            "Type": "OverviewTile",
                            "Version": 2,
                            "Configuration": {
                                "LineChart": {
                                    "Query": "amazon_vpc_nat_gateway_CL | summarize avg(active_connection_count_d) by nat_gateway_vpc_id_s",
                                    "Callout": {
                                        "Title": "Active Connections",
                                        "Series": "",
                                        "Operation": "Last Sample"
                                    },
                                    "yAxis": {
                                        "isLogarithmic": false,
                                        "units": {
                                            "baseUnitType": "",
                                            "baseUnit": "",
                                            "displayUnit": ""
                                        },
                                        "customLabel": "Connections"
                                    }
                                },
                                "Advanced": {
                                    "DataFlowVerification": {
                                        "Enabled": false,
                                        "Query": "search * | limit 1 | project TimeGenerated",
                                        "Message": ""
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        }
    ]
}