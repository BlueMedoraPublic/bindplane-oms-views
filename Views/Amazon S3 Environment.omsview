{
    "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "location": {
            "type": "string",
            "defaultValue": ""
        },
        "resourcegroup": {
            "type": "string",
            "defaultValue": ""
        },
        "subscriptionId": {
            "type": "string",
            "defaultValue": ""
        },
        "workspace": {
            "type": "string",
            "defaultValue": ""
        },
        "workspaceapiversion": {
            "type": "string",
            "defaultValue": ""
        }
    },
    "resources": [
        {
            "apiVersion": "[parameters('workspaceapiversion')]",
            "name": "[parameters('workspace')]",
            "type": "Microsoft.OperationalInsights/workspaces",
            "location": "[parameters('location')]",
            "id": "[Concat('/subscriptions/', parameters('subscriptionId'), '/resourceGroups/', parameters('resourcegroup'), '/providers/Microsoft.OperationalInsights/workspaces/', parameters('workspace'))]",
            "resources": [
                {
                    "apiVersion": "2015-11-01-preview",
                    "name": "Amazon S3 Environment",
                    "type": "views",
                    "location": "[parameters('location')]",
                    "id": "[Concat('/subscriptions/', parameters('subscriptionId'), '/resourceGroups/', parameters('resourcegroup'), '/providers/Microsoft.OperationalInsights/workspaces/', parameters('workspace'),'/views/Amazon S3 Environment')]",
                    "dependson": [
                        "[Concat('/subscriptions/', parameters('subscriptionId'), '/resourceGroups/', parameters('resourcegroup'), '/providers/Microsoft.OperationalInsights/workspaces/', parameters('workspace'))]"
                    ],
                    "properties": {
                        "Id": "Amazon S3 Environment",
                        "Name": "Amazon S3 Environment",
                        "Author": "service.azure@bluemedora.com",
                        "Source": "Local",
                        "Version": 2,
                        "Dashboard": [
                            {
                                "Id": "InformationBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "Title": "S3 Overview",
                                        "NewGroup": false,
                                        "Color": "#ba141a"
                                    },
                                    "Header": {
                                        "Image": "data:image/png;base64,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",
                                        "Label": "Amazon S3",
                                        "Link": {
                                            "Label": "More info",
                                            "Url": "https://docs.bindplane.bluemedora.com/docs/s3"
                                        }
                                    },
                                    "List": [
                                        {
                                            "Title": "Overview",
                                            "Content": "Amazon S3 is a fully managed, cloud hosted object storage service."
                                        },
                                        {
                                            "Title": "Key Performance Indicators",
                                            "Content": "In Amazon S3, it's important to monitor the number of requests being made to each bucket. This will indicate how often objects are being stored or retrieved, which will directly affect the cost of a bucket.\n\nLikewise, it's also important to monitor the amount of data that is being downloaded from a bucket, as this will also affect cost."
                                        }
                                    ]
                                }
                            },
                            {
                                "Id": "SingleQueryDonutBuilderBladeV1",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "S3 Bucket Size",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "--",
                                        "Subtitle": ""
                                    },
                                    "Donut": {
                                        "Query": "amazon_s3_bucket_CL | where ${Bucket} | summarize avg(iif(isempty(standard_storage_bucket_size_d), 0.0, standard_storage_bucket_size_d)) by amazon_s3_bucket_name_s | order by avg_ desc",
                                        "CenterLegend": {
                                            "Text": "Total",
                                            "Operation": "Sum",
                                            "ArcsToSelect": []
                                        },
                                        "Options": {
                                            "colors": [
                                                "#00188f",
                                                "#0072c6",
                                                "#00bcf2"
                                            ],
                                            "valueColorMapping": []
                                        },
                                        "NavigationSelect": {}
                                    },
                                    "List": {
                                        "Query": "amazon_s3_bucket_CL | where ${Bucket} | summarize avg(iif(isempty(standard_storage_bucket_size_d), 0.0, standard_storage_bucket_size_d)) by amazon_s3_bucket_name_s | order by avg_ desc",
                                        "HideGraph": false,
                                        "enableSparklines": false,
                                        "operation": "Last Sample",
                                        "ColumnsTitle": {
                                            "Name": "Bucket",
                                            "Value": "Size"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "search {selected item} | sort by TimeGenerated desc",
                                        "NavigationSelect": {
                                            "NavigationQuery": "search {selected item} | sort by TimeGenerated desc"
                                        }
                                    }
                                }
                            },
                            {
                                "Id": "LineChartCalloutBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "S3 Bucket Downloads",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "Bytes Downloaded",
                                        "Subtitle": ""
                                    },
                                    "LineChart": {
                                        "Query": "amazon_s3_bucket_CL | where ${Bucket} | summarize sum(iif(isempty(average_bytes_downloaded_d),0.0,average_bytes_downloaded_d)) by amazon_s3_bucket_name_s",
                                        "Callout": {
                                            "Title": "Max Downloaded",
                                            "Series": "",
                                            "Operation": "Max"
                                        },
                                        "yAxis": {
                                            "isLogarithmic": false,
                                            "units": {
                                                "baseUnitType": "Bits",
                                                "baseUnit": "Bytes",
                                                "displayUnit": "Bytes"
                                            },
                                            "customLabel": "Data"
                                        },
                                        "NavigationSelect": {}
                                    },
                                    "List": {
                                        "Query": "amazon_s3_bucket_CL | where ${Bucket} | summarize sum(iif(isempty(average_bytes_downloaded_d),0.0,average_bytes_downloaded_d)) by amazon_s3_bucket_name_s | order by sum_ desc",
                                        "HideGraph": false,
                                        "enableSparklines": true,
                                        "operation": "Last Sample",
                                        "ColumnsTitle": {
                                            "Name": "Bucket",
                                            "Value": "Downloaded Bytes"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "search {selected item} | sort by TimeGenerated desc",
                                        "NavigationSelect": {
                                            "NavigationQuery": "search {selected item} | sort by TimeGenerated desc"
                                        }
                                    }
                                }
                            },
                            {
                                "Id": "LineChartCalloutBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "Bucket Request Latency",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "Request Latency",
                                        "Subtitle": ""
                                    },
                                    "LineChart": {
                                        "Query": "amazon_s3_bucket_CL | where ${Bucket} | summarize avg(iif(isempty(average_total_request_latency_d),0.0,average_total_request_latency_d)) by amazon_s3_bucket_name_s | order by avg_ desc",
                                        "Callout": {
                                            "Title": "Avg per hour",
                                            "Series": "",
                                            "Operation": "Average"
                                        },
                                        "yAxis": {
                                            "isLogarithmic": false,
                                            "units": {
                                                "baseUnitType": "TimeRange",
                                                "baseUnit": "Milliseconds",
                                                "displayUnit": "Milliseconds"
                                            },
                                            "customLabel": "Latency"
                                        },
                                        "NavigationSelect": {}
                                    },
                                    "List": {
                                        "Query": "amazon_s3_bucket_CL | where ${Bucket} | summarize avg(iif(isempty(average_total_request_latency_d),0.0,average_total_request_latency_d)) by amazon_s3_bucket_name_s | order by avg_ desc",
                                        "HideGraph": false,
                                        "enableSparklines": true,
                                        "operation": "Last Sample",
                                        "ColumnsTitle": {
                                            "Name": "Bucket",
                                            "Value": "Latency"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "search {selected item} | sort by TimeGenerated desc",
                                        "NavigationSelect": {
                                            "NavigationQuery": "search {selected item} | sort by TimeGenerated desc"
                                        }
                                    }
                                }
                            },
                            {
                                "Id": "LineChartCalloutStackedBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "S3 Bucket Requests",
                                        "newGroup": false
                                    },
                                    "charts": [
                                        {
                                            "Header": {
                                                "Title": "Bucket Gets",
                                                "Subtitle": ""
                                            },
                                            "LineChart": {
                                                "Query": "amazon_s3_bucket_CL | where ${Bucket} | extend get=iif(isempty(get_requests_d), 0.0, get_requests_d) | summarize sum(get) by amazon_s3_bucket_name_s | order by sum_get desc",
                                                "yAxis": {
                                                    "isLogarithmic": false,
                                                    "units": {
                                                        "baseUnitType": "",
                                                        "baseUnit": "",
                                                        "displayUnit": ""
                                                    },
                                                    "customLabel": "Requests"
                                                },
                                                "NavigationSelect": {}
                                            }
                                        },
                                        {
                                            "Header": {
                                                "Title": "Bucket Puts",
                                                "Subtitle": ""
                                            },
                                            "LineChart": {
                                                "Query": "amazon_s3_bucket_CL | where ${Bucket} | extend put=iif(isempty(put_requests_d), 0.0, put_requests_d) | summarize sum(put) by amazon_s3_bucket_name_s | order by sum_put desc",
                                                "yAxis": {
                                                    "isLogarithmic": false,
                                                    "units": {
                                                        "baseUnitType": "",
                                                        "baseUnit": "",
                                                        "displayUnit": ""
                                                    },
                                                    "customLabel": "Requests"
                                                },
                                                "NavigationSelect": {}
                                            }
                                        },
                                        {
                                            "Header": {
                                                "Title": "Bucket Deletes",
                                                "Subtitle": ""
                                            },
                                            "LineChart": {
                                                "Query": "amazon_s3_bucket_CL | where ${Bucket} | extend delete=iif(isempty(columnifexists('delete_requests_d', 0.0)), 0.0, columnifexists('delete_requests_d', 0.0)) | summarize sum(delete) by amazon_s3_bucket_name_s | order by sum_delete desc",
                                                "yAxis": {
                                                    "isLogarithmic": false,
                                                    "units": {
                                                        "baseUnitType": "",
                                                        "baseUnit": "",
                                                        "displayUnit": ""
                                                    },
                                                    "customLabel": "Requests"
                                                },
                                                "NavigationSelect": {}
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "Id": "NotableQueriesBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "Amazon S3 Events",
                                        "newGroup": false,
                                        "preselectedFilters": "",
                                        "renderMode": "grid"
                                    },
                                    "queries": [
                                        {
                                            "query": "amazon_s3_bucket_CL   | join kind=inner( amazon_s3_bucket_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_s3_bucket_name_s ) on TimeGenerated, amazon_s3_bucket_name_s | project amazon_s3_bucket_name_s, owner_id_s, owner_name_s",
                                            "displayName": "Bucket Owner"
                                        },
                                        {
                                            "query": "amazon_s3_bucket_CL   | join kind=inner( amazon_s3_bucket_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_s3_bucket_name_s ) on TimeGenerated, amazon_s3_bucket_name_s | project amazon_s3_bucket_name_s, creation_date_d, accelerate_enabled_d, accelerate_config_status_s, logging_enabled_d, log_file_prefix_s, replication_role_arn_s",
                                            "displayName": "Bucket Configuration"
                                        },
                                        {
                                            "query": "amazon_s3_bucket_CL   | join kind=inner( amazon_s3_bucket_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_s3_bucket_name_s ) on TimeGenerated, amazon_s3_bucket_name_s | project amazon_s3_bucket_name_s, bytes_downloaded_max_d, bytes_downloaded_min_d, bytes_downloaded_sample_count_d, bytes_downloaded_sum_d ",
                                            "displayName": "Bucket Downloads"
                                        },
                                        {
                                            "query": "amazon_s3_bucket_CL   | join kind=inner( amazon_s3_bucket_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_s3_bucket_name_s ) on TimeGenerated, amazon_s3_bucket_name_s | project amazon_s3_bucket_name_s, uploaded_per_request_d, uploaded_throughput_d",
                                            "displayName": "Bucket Uploads"
                                        },
                                        {
                                            "query": "amazon_s3_bucket_CL   | join kind=inner( amazon_s3_bucket_CL | summarize TimeGenerated=max(TimeGenerated) by amazon_s3_bucket_name_s ) on TimeGenerated, amazon_s3_bucket_name_s | project amazon_s3_bucket_name_s, tags_s",
                                            "displayName": "Bucket Tags"
                                        },
                                        {
                                            "query": "amazon_s3_bucket_CL | summarize avg(iif(isempty(number_of_objects_d),0.0,number_of_objects_d)) by amazon_s3_bucket_name_s | order by avg_ desc",
                                            "displayName": "Bucket Object Count"
                                        }
                                    ]
                                }
                            }
                        ],
                        "Filters": [
                            {
                                "FieldName": "amazon_s3_bucket_name_s",
                                "QueryForValues": "amazon_s3_bucket_CL | distinct amazon_s3_bucket_name_s",
                                "Title": "Bucket"
                            }
                        ],
                        "OverviewTile": {
                            "Id": "LineChartCalloutBuilderTile",
                            "Type": "OverviewTile",
                            "Version": 2,
                            "Configuration": {
                                "LineChart": {
                                    "Query": "amazon_s3_bucket_CL   | summarize sum(iif(isempty(average_bytes_downloaded_d),0.0,average_bytes_downloaded_d)) by amazon_s3_bucket_name_s",
                                    "Callout": {
                                        "Title": "Max Downloaded",
                                        "Series": "",
                                        "Operation": "Max"
                                    },
                                    "yAxis": {
                                        "isLogarithmic": false,
                                        "units": {
                                            "baseUnitType": "Bits",
                                            "baseUnit": "Bytes",
                                            "displayUnit": "Bytes"
                                        },
                                        "customLabel": "Data"
                                    }
                                },
                                "Advanced": {
                                    "DataFlowVerification": {
                                        "Enabled": false,
                                        "Query": "search * | limit 1 | project TimeGenerated",
                                        "Message": ""
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        }
    ]
}